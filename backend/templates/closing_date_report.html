<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Home Purchase Timeline — {{propertyAddress}}</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* Print rules */
@page { 
  size: Letter; 
  margin: 0.5in;
}

* { 
  -webkit-print-color-adjust: exact; 
  print-color-adjust: exact; 
  box-sizing: border-box;
}

/* Base styles */
body { 
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.4;
  margin: 0;
  padding: 0;
  color: #1f2937;
  font-size: 12px;
}

.container {
  max-width: 100%;
  margin: 0 auto;
}

/* Header */
.header {
  background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
  color: white;
  padding: 25px;
  margin-bottom: 25px;
  border-radius: 8px;
}

.header h1 {
  font-size: 28px;
  font-weight: bold;
  margin: 0 0 8px 0;
}

.header .subtitle {
  font-size: 16px;
  opacity: 0.9;
  margin: 0 0 15px 0;
}

.header-meta {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  font-size: 14px;
}

/* Agent info in header */
.agent-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.agent-details {
  display: flex;
  align-items: center;
  gap: 15px;
}

.agent-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: rgba(255,255,255,0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: bold;
}

.agent-text {
  color: white;
}

.agent-name {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 2px;
}

.agent-contact {
  font-size: 14px;
  opacity: 0.9;
}

.brokerage-info {
  text-align: right;
  font-size: 14px;
  opacity: 0.9;
}

/* Grid layouts */
.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

.grid-3 {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 15px;
  margin-bottom: 20px;
}

/* Card styles */
.card {
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 20px;
}

.card-header {
  font-size: 16px;
  font-weight: bold;
  color: #374151;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 2px solid #f3f4f6;
}

/* Summary cards */
.summary-card {
  text-align: center;
  padding: 15px;
  border-radius: 8px;
  border: 2px solid #e5e7eb;
  background: white;
}

.summary-value {
  font-size: 20px;
  font-weight: bold;
  margin-bottom: 5px;
}

.summary-label {
  font-size: 12px;
  color: #6b7280;
  font-weight: 500;
}

.summary-green .summary-value { color: #16a34a; }
.summary-blue .summary-value { color: #2563eb; }
.summary-orange .summary-value { color: #ea580c; }

/* Timeline styles */
.timeline {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 15px;
  margin: 15px 0;
}

.timeline-item {
  text-align: center;
  padding: 12px;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  background: white;
  page-break-inside: avoid;
}

.timeline-icon {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  margin: 0 auto 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  font-weight: bold;
}

.timeline-date {
  font-size: 14px;
  font-weight: bold;
  color: #1f2937;
  margin-bottom: 5px;
}

.timeline-name {
  font-size: 13px;
  font-weight: bold;
  color: #374151;
  margin-bottom: 8px;
}

.timeline-description {
  font-size: 11px;
  color: #6b7280;
  line-height: 1.3;
}

.timeline-note {
  font-size: 11px;
  color: #2563eb;
  font-style: italic;
  margin-top: 5px;
}

/* Status colors */
.status-completed { 
  background: #dcfce7; 
  border-color: #16a34a; 
  color: #15803d; 
}

.status-upcoming { 
  background: #fef3c7; 
  border-color: #f59e0b; 
  color: #92400e; 
}

.status-overdue { 
  background: #fef2f2; 
  border-color: #dc2626; 
  color: #b91c1c; 
}

/* Tables */
.table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
}

.table th,
.table td {
  padding: 12px;
  text-align: left;
  border-bottom: 1px solid #e5e7eb;
  font-size: 12px;
}

.table th {
  background-color: #f9fafb;
  font-weight: bold;
  color: #374151;
}

.table .date-col {
  text-align: right;
  font-weight: 500;
}

/* Key-value pairs */
.info-grid {
  display: block;
  font-size: 12px;
}

.info-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid #f3f4f6;
  min-height: 24px;
  gap: 15px;
}

.info-label {
  font-weight: bold;
  color: #6b7280;
  min-width: 140px;
  flex-shrink: 0;
}

.info-value {
  color: #1f2937;
  font-weight: 500;
  text-align: right;
  word-break: keep-all;
}

/* Explanations section */
.explanations {
  background: #f8fafc;
  border-radius: 8px;
  padding: 20px;
  margin-top: 25px;
}

.explanations h3 {
  font-size: 18px;
  font-weight: bold;
  margin: 0 0 15px 0;
  color: #374151;
}

.explanation-item {
  margin-bottom: 15px;
  padding: 10px;
  background: white;
  border-radius: 6px;
  border: 1px solid #e5e7eb;
}

.explanation-term {
  font-weight: bold;
  color: #1f2937;
  margin-bottom: 5px;
  font-size: 13px;
}

.explanation-text {
  color: #6b7280;
  line-height: 1.5;
  font-size: 12px;
}

/* Utility classes */
.text-center { text-align: center; }
.text-right { text-align: right; }
.font-bold { font-weight: bold; }
.mb-0 { margin-bottom: 0; }

</style>
</head>

<body>
<div class="container">

<!-- Header -->
<div class="header">
  <h1>Home Purchase Timeline</h1>
  <p class="subtitle">{{propertyAddress}} • Contract to Closing: {{timelineLength}} Days</p>
  
  <div class="header-meta">
    
    <div>{{generatedAt}}</div>
  </div>
</div>

<!-- Summary Cards -->
<div class="grid-3">
  <div class="summary-card summary-blue">
    <div class="summary-value">{{contractDate}}</div>
    <div class="summary-label">Under Contract Date</div>
  </div>
  <div class="summary-card summary-green">
    <div class="summary-value">{{closingDate}}</div>
    <div class="summary-label">Expected Closing Date</div>
  </div>
  <div class="summary-card summary-orange">
    <div class="summary-value">{{timelineLength}} Days</div>
    <div class="summary-label">Total Timeline</div>
  </div>
</div>

<!-- Transaction Details -->
<div class="grid-2">
  <div class="card">
    <div class="card-header">Transaction Information</div>
    <div class="info-grid">
      <div class="info-item">
        <span class="info-label">Property Address:</span>
        <span class="info-value">{{propertyAddress}}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Under Contract Date:</span>
        <span class="info-value">{{contractDate}}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Expected Closing Date:</span>
        <span class="info-value">{{closingDate}}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Loan Type:</span>
        <span class="info-value">{{loanType}}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Purchase Type:</span>
        <span class="info-value">{{purchaseType}}</span>
      </div>
    </div>
  </div>
  
  <div class="card">
    <div class="card-header">Timeline Overview</div>
    <div class="info-grid">
      <div class="info-item">
        <span class="info-label">Total Milestones:</span>
        <span class="info-value">{{milestoneCount}}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Contract to Closing:</span>
        <span class="info-value">{{timelineLength}} Days</span>
      </div>
      <div class="info-item">
        <span class="info-label">Critical Path Items:</span>
        <span class="info-value">{{criticalCount}}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Timeline Status:</span>
        <span class="info-value">{{timelineStatus}}</span>
      </div>
    </div>
  </div>
</div>

<!-- Detailed Timeline -->
<div class="card">
  <div class="card-header">Complete Purchase Timeline & Milestones</div>
  
  <table class="table">
    <thead>
      <tr>
        <th>Milestone</th>
        <th>Description</th>
        <th class="text-right">Target Date</th>
        <th class="text-right">Status</th>
      </tr>
    </thead>
    <tbody>
      {{timelineTableRows}}
    </tbody>
  </table>
</div>

{{visualTimelineSection}}

<!-- Explanations Section -->
<div class="explanations">
  <h3>Home Purchase Timeline Terms - Explained Simply</h3>
  
  <div class="explanation-item">
    <div class="explanation-term">Under Contract Date</div>
    <div class="explanation-text">The date when both buyer and seller have signed the purchase agreement and all contingencies are in place. This is when your timeline officially begins and earnest money is typically deposited.</div>
  </div>
  
  <div class="explanation-item">
    <div class="explanation-term">Home Inspection</div>
    <div class="explanation-text">A professional examination of the property's condition, including structural, electrical, plumbing, and HVAC systems. This typically occurs within 7-10 days of going under contract and may lead to repair negotiations.</div>
  </div>
  
  <div class="explanation-item">
    <div class="explanation-term">Appraisal</div>
    <div class="explanation-text">A lender-required assessment to determine the property's market value. The appraised value must meet or exceed the loan amount. If it comes in low, you may need to renegotiate the price or bring more cash to closing.</div>
  </div>
  
  <div class="explanation-item">
    <div class="explanation-term">Loan Approval</div>
    <div class="explanation-text">The final step where your lender reviews all documentation and gives final approval for your mortgage. This includes verification of employment, assets, and credit, plus review of the appraisal and title work.</div>
  </div>
  
  <div class="explanation-item">
    <div class="explanation-term">Final Walkthrough</div>
    <div class="explanation-text">Your last opportunity to inspect the property before closing, typically done 24-48 hours before closing. You'll verify that agreed-upon repairs were completed and the property is in expected condition.</div>
  </div>
  
  <div class="explanation-item">
    <div class="explanation-term">Closing Date</div>
    <div class="explanation-text">The final day when ownership legally transfers from seller to buyer. You'll sign all loan documents, receive keys, and officially become the homeowner. Plan for this to take 1-3 hours.</div>
  </div>
  
  <div class="explanation-item">
    <div class="explanation-term">Title & Insurance</div>
    <div class="explanation-text">Title work ensures the seller has clear ownership and there are no liens or legal issues. Title insurance protects you and your lender against any future title problems that might arise.</div>
  </div>
  
  <div class="explanation-item">
    <div class="explanation-term">Contingencies</div>
    <div class="explanation-text">Conditions that must be met for the sale to proceed, such as financing, inspection, or appraisal contingencies. These protect the buyer's earnest money and provide exit opportunities if conditions aren't met.</div>
  </div>
</div>

<!-- Best Practices & Tips -->
<div class="card">
  <div class="card-header">💡 Important Tips for Home Purchase Success</div>
  
  <div class="grid-2">
    <div>
      <div class="explanation-item">
        <div class="explanation-term">📋 Stay Organized with Documents</div>
        <div class="explanation-text">Keep all purchase-related documents in one place. Your lender will need employment verification, bank statements, tax returns, and other financial documents throughout the process.</div>
      </div>
      
      <div class="explanation-item">
        <div class="explanation-term">🏠 Don't Skip the Inspection</div>
        <div class="explanation-text">Even in competitive markets, try to include inspection contingencies. A $400-600 inspection can save you thousands in unexpected repairs. Focus on major systems and structural issues.</div>
      </div>
      
      <div class="explanation-item">
        <div class="explanation-term">💰 Avoid Major Financial Changes</div>
        <div class="explanation-text">Don't change jobs, make large purchases, or open new credit accounts during the loan process. Lenders verify employment and credit again before closing.</div>
      </div>
      
      <div class="explanation-item">
        <div class="explanation-term">📅 Plan for Delays</div>
        <div class="explanation-text">Build buffer time into your timeline. Weather, lender delays, or inspection issues can push closing dates. Have backup plans for temporary housing if needed.</div>
      </div>
    </div>
    
    <div>
      <div class="explanation-item">
        <div class="explanation-term">🔍 Review All Documents Carefully</div>
        <div class="explanation-text">Read every document before signing, especially the loan estimate and closing disclosure. Ask questions about any fees or terms you don't understand - it's your right as a buyer.</div>
      </div>
      
      <div class="explanation-item">
        <div class="explanation-term">🏡 Prepare for Closing Day</div>
        <div class="explanation-text">Bring a cashier's check for closing costs, government-issued ID, and any required documents. Plan for 1-3 hours at the title company or attorney's office.</div>
      </div>
      
      <div class="explanation-item">
        <div class="explanation-term">📞 Communicate with Your Agent</div>
        <div class="explanation-text">Keep your real estate agent informed of any changes or concerns. They can help navigate issues and keep the timeline on track. Don't hesitate to ask questions throughout the process.</div>
      </div>
      
      <div class="explanation-item">
        <div class="explanation-term">🛡️ Get Homeowners Insurance Early</div>
        <div class="explanation-text">Shop for homeowners insurance immediately after going under contract. You'll need a policy in place before closing, and it may take time to get the best rates.</div>
      </div>
    </div>
  </div>
  
  <div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 15px; border-radius: 8px; margin-top: 20px;">
    <div class="explanation-term" style="color: #92400e;">⚠️ Red Flags That Could Delay Closing</div>
    <div class="explanation-text" style="color: #92400e;">• Appraisal comes in lower than purchase price • Major inspection issues discovered • Lender requests additional documentation • Title issues or liens discovered • Employment or income changes • Credit score drops • Interest rates increase significantly</div>
  </div>
  
  <div style="background: #dcfce7; border: 1px solid #16a34a; padding: 15px; border-radius: 8px; margin-top: 15px;">
    <div class="explanation-term" style="color: #15803d;">✅ Signs You're On Track for Successful Closing</div>
    <div class="explanation-text" style="color: #15803d;">• Pre-approval letter from qualified lender • Clean home inspection or agreed-upon repairs • Appraisal meets or exceeds purchase price • All contingencies removed on schedule • Homeowners insurance secured • Final loan approval received • Clear title confirmed</div>
  </div>
</div>

<!-- Footer -->
<div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #e5e7eb; text-align: center; font-size: 11px; color: #6b7280;">
  <p><strong>This timeline is for informational purposes only and should not be considered as professional advice.</strong><br>
  Actual dates may vary based on lender requirements, market conditions, and unforeseen circumstances. Always verify timelines with your lender, agent, and title company.</p>
  <p style="margin-top: 15px;">
  Generated on {{generatedAt}}</p>
</div>

</div>
</body>
</html>